
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ChronoDeliver ‚Äì Delivery Decision Helper</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      background-color: #f5f5f5;
      color: #333;
    }
    h2, h3 {
      text-align: center;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 16px;
      box-sizing: border-box;
    }
    button {
      background-color: #ff6600;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      opacity: 0.95;
    }
    #result, #summary {
      margin-top: 20px;
      padding: 15px;
      font-weight: bold;
      border-radius: 6px;
      background-color: #fff;
      text-align: center;
    }
    .success { color: green; }
    .danger { color: red; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    .small { font-size: 14px; }
  </style>
</head>
<body>
  <h2>ChronoDeliver üöó</h2>
  <h3>Delivery Decision Helper</h3>

  <label>Payout ($):</label>
  <input type="number" id="payout" step="0.01">

  <label>Distance (km):</label>
  <input type="number" id="distance" step="0.1">

  <label>Estimated Time (min):</label>
  <input type="number" id="time" step="1">

  <label>üîß Minimum Payout ($):</label>
  <input type="number" id="minPayout" value="7" step="0.1">

  <label>üîß Minimum $/km:</label>
  <input type="number" id="minPerKm" value="2" step="0.1">

  <label>üîß Max Time (min):</label>
  <input type="number" id="maxTime" value="15" step="1">

  <button onclick="checkOrder()">Should I Accept?</button>

  <div id="result"></div>
  <div id="summary" class="small"></div>
  <table id="logTable">
    <thead>
      <tr><th>#</th><th>Payout</th><th>Distance</th><th>Time</th><th>$ per km</th><th>Result</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    // Save/Load Thresholds
    window.onload = function() {
      if (localStorage.getItem('minPayout')) document.getElementById('minPayout').value = localStorage.getItem('minPayout');
      if (localStorage.getItem('minPerKm')) document.getElementById('minPerKm').value = localStorage.getItem('minPerKm');
      if (localStorage.getItem('maxTime')) document.getElementById('maxTime').value = localStorage.getItem('maxTime');
    }

    function saveThresholds() {
      localStorage.setItem('minPayout', document.getElementById('minPayout').value);
      localStorage.setItem('minPerKm', document.getElementById('minPerKm').value);
      localStorage.setItem('maxTime', document.getElementById('maxTime').value);
    }

    let log = [];
    function checkOrder() {
      const payout = parseFloat(document.getElementById('payout').value);
      const distance = parseFloat(document.getElementById('distance').value);
      const time = parseInt(document.getElementById('time').value);

      const minPayout = parseFloat(document.getElementById('minPayout').value);
      const minPerKm = parseFloat(document.getElementById('minPerKm').value);
      const maxTime = parseInt(document.getElementById('maxTime').value);

      saveThresholds();

      const resultDiv = document.getElementById('result');
      const summaryDiv = document.getElementById('summary');
      const tableBody = document.querySelector("#logTable tbody");

      if (isNaN(payout) || isNaN(distance) || isNaN(time)) {
        resultDiv.innerHTML = "‚ö†Ô∏è Please fill in all fields.";
        resultDiv.className = "danger";
        return;
      }

      const perKm = payout / distance;
      const meets = {
        payout: payout >= minPayout,
        perKm: perKm >= minPerKm,
        time: time <= maxTime
      };

      const accepted = meets.payout && meets.perKm && meets.time;
      resultDiv.innerHTML = accepted ? `‚úÖ Accept ‚Äî $${payout} for ${distance}km @ $${perKm.toFixed(2)}/km` :
                                       `‚ùå Decline ‚Äî $${payout} for ${distance}km @ $${perKm.toFixed(2)}/km`;
      resultDiv.className = accepted ? "success" : "danger";

      log.unshift({ payout, distance, time, perKm: perKm.toFixed(2), result: accepted ? "Accept" : "Decline" });

      tableBody.innerHTML = "";
      log.forEach((entry, index) => {
        tableBody.innerHTML += `<tr>
          <td>${index + 1}</td>
          <td>$${entry.payout.toFixed(2)}</td>
          <td>${entry.distance}km</td>
          <td>${entry.time}min</td>
          <td>$${entry.perKm}</td>
          <td>${entry.result}</td>
        </tr>`;
      });

      const total = log.length;
      const acceptedCount = log.filter(e => e.result === "Accept").length;
      const declinedCount = total - acceptedCount;
      const avgPerKm = (log.reduce((sum, e) => sum + parseFloat(e.perKm), 0) / total).toFixed(2);
      const bestPerKm = Math.max(...log.map(e => parseFloat(e.perKm))).toFixed(2);
      const worstPerKm = Math.min(...log.map(e => parseFloat(e.perKm))).toFixed(2);

      summaryDiv.innerHTML = `
        Total Orders: ${total} | ‚úÖ ${acceptedCount} / ‚ùå ${declinedCount} <br/>
        Avg $/km: $${avgPerKm} | Best: $${bestPerKm} | Worst: $${worstPerKm}
      `;
    }
  </script>
</body>
</html>
